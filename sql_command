# create table command
CREATE TABLE past_delivery_data (
    serial INTEGER, 
    model TEXT, 
    HP_case_id TEXT, 
    company_name TEXT,
    order_date INTEGER,
    arrive_date INTEGER,
    goods_receiver_name TEXT,
    address TEXT,
    goods_receiver_phone TEXT,
    goods_name TEXT,
    quantity INTEGER,
    remark TEXT, goods_type TEXT, unamed TEXT
)

CREATE TABLE consumable_levels (
    `Report Content DateTime` TEXT,
    `Customer Name` TEXT,
    `Country` TEXT,
    `Region` TEXT,
    `Site` TEXT,
    `Building` TEXT,
    `Level` INTEGER,
    `Product Model Name` TEXT,
    `Asset Number` TEXT,
    `Serial Number` TEXT,
    `Usage Count Date` TEXT,
    `Black Level` INTEGER,
    `Cyan Level` INTEGER,
    `Magenta Level` INTEGER,
    `Yellow Level` INTEGER,
    `Light Cyan Level` INTEGER,
    `Light Magenta Level` INTEGER,
    `Tri-Color Level` INTEGER,
    `Bonding Agent Level` INTEGER,
    `Staple Level` INTEGER,
    `Staple Second Level` INTEGER,
    `Staple Third Level` INTEGER,
    `Cyan Drum Level` INTEGER,
    `Yellow Drum Level` INTEGER,
    `Magenta Drum Level` INTEGER,
    `Black Drum Level` INTEGER,
    `Drum Kit Level` INTEGER,
    `Transfer Kit Level` INTEGER,
    `Fuser Kit Level` INTEGER,
    `Cleaning Kit Level` INTEGER,
    `Maintenance Combo Kit Level` INTEGER,
    `Document Feeder Kit Level` INTEGER,
    `Roller Level` INTEGER,
    `Grey Level` INTEGER,
    `Light Grey Level` INTEGER,
    `Photo Black Level` INTEGER,
    `Matte Black Level` INTEGER,
    `Red Level` INTEGER,
    `Green Level` INTEGER,
    `Blue Level` INTEGER,
    `Gloss Enhancer Level` INTEGER,
    `Pen Wipe Level` INTEGER,
    `Collection Unit Level` INTEGER,
    `Black Developer Maintenance Level` INTEGER,
    `Cyan Developer Maintenance Level` INTEGER,
    `Magenta Developer Maintenance Level` INTEGER,
    `Yellow Developer Maintenance Level` INTEGER,
    PRIMARY KEY(`Report Content DateTime`, `Serial Number`)
)

# 紀錄各設備最後派送狀態
CREATE TABLE deliver_status (
    `Last Deliver Date` TEXT,
    `Customer Name` TEXT,
    `Site` TEXT,
    `Building` TEXT,
    `Level` TEXT,
    `Product Model Name` TEXT,
    `Asset Number` TEXT,
    `Serial Number` TEXT,
    `Usage Count Date` TEXT,
    `Black Level` INTEGER,
    `Cyan Level` INTEGER,
    `Magenta Level` INTEGER,
    `Yellow Level` INTEGER,
    `Cyan Drum Level` INTEGER,
    `Yellow Drum Level` INTEGER,
    `Magenta Drum Level` INTEGER,
    `Black Drum Level` INTEGER,
    `Drum Kit Level` INTEGER,
    `Transfer Kit Level` INTEGER,
    `Fuser Kit Level` INTEGER,
    `Cleaning Kit Level` INTEGER,
    `Maintenance Combo Kit Level` INTEGER,
    `Document Feeder Kit Level` INTEGER,
    `Roller Level` INTEGER,
    PRIMARY KEY(`Serial Number`)
)

# 昨天的紀錄
select *, DATE(substr(`Report Content DateTime`, 7, 4) ||
	'-' ||
	substr(`Report Content DateTime`, 1, 2) ||
	'-' ||
	substr(`Report Content DateTime`, 4, 2)
	)  as 'datetime'
from consumable_levels where datetime = DATE('NOW','-1 DAY')


# 選出所有 2020-10-28 以前所有過去曾經有數值的紀錄
select *, DATE(substr(`Report Content DateTime`, 7, 4) ||
	'-' ||
	substr(`Report Content DateTime`, 1, 2) ||
	'-' ||
	substr(`Report Content DateTime`, 4, 2)
	)  as 'datetime'
from 
	consumable_levels 
where 
	datetime < '2020-10-28' 
and `Black Level` > -1
or `Cyan Level` > -1
or `Magenta Level` > -1
or `Yellow Level` > -1
or `Light Cyan Level` > -1
or `Light Magenta Level` > -1
or `Tri-Color Level` > -1
or `Bonding Agent Level` > -1
or `Staple Level` > -1
or `Staple Second Level` > -1
or `Staple Third Level` > -1
or `Cyan Drum Level` > -1
or `Yellow Drum Level` > -1
or `Magenta Drum Level` > -1
or `Black Drum Level` > -1
or `Drum Kit Level` > -1
or `Transfer Kit Level` > -1
or `Fuser Kit Level` > -1
or `Cleaning Kit Level` > -1
or `Maintenance Combo Kit Level` > -1
or `Document Feeder Kit Level` > -1
or `Roller Level` > -1
or `Grey Level` > -1
or `Light Grey Level` > -1
or `Photo Black Level` > -1
or `Matte Black Level` > -1
or `Red Level` > -1
or `Green Level` > -1
or `Blue Level` > -1
or `Gloss Enhancer Level` > -1
or `Pen Wipe Level` > -1
or `Collection Unit Level` > -1
or `Black Developer Maintenance Level` > -1
or `Cyan Developer Maintenance Level` > -1
or `Magenta Developer Maintenance Level` > -1
or `Yellow Developer Maintenance Level` > -1




